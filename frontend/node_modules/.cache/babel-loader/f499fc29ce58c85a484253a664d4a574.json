{"ast":null,"code":"var _jsxFileName = \"/home/h3ic/bukh/frontend/src/Activities.js\";\nimport { ActivityRowCell, RowCell, ParticipationCheckbox, TotalRow } from \"./TableElements\";\nimport { calcActivityExpenses } from './Calculations';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction DebtRow(props) {\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: /*#__PURE__*/_jsxDEV(\"th\", {\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        children: \"Debt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 6,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 6,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 5,\n    columnNumber: 13\n  }, this);\n}\n\n_c = DebtRow;\n\nfunction ActivityRow(props) {\n  let checkboxes = [];\n\n  for (const userID of props.partyUsersID) {\n    checkboxes.push( /*#__PURE__*/_jsxDEV(ParticipationCheckbox, {\n      handleCheckboxClick: props.handleCheckboxClick,\n      activityID: props.activityID,\n      userID: userID,\n      defaultChecked: props.activityUsers.includes(userID)\n    }, props.activityID + userID, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 25\n    }, this));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: [/*#__PURE__*/_jsxDEV(ActivityRowCell, {\n      activity: props.activity,\n      value: props.activityName,\n      handleActivityClick: props.handleActivityClick\n    }, props.activityName, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 13\n    }, this), checkboxes, /*#__PURE__*/_jsxDEV(RowCell, {\n      value: props.activityExpense\n    }, props.activityID, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 9\n  }, this);\n}\n\n_c2 = ActivityRow;\n\nfunction Activities(props) {\n  // const activities = props.activities;\n  const users = props.users;\n  const partyUsersID = users && users.map(user => user.user_id);\n  let activitiesRows = [];\n  let totalUserExpenses = Object.fromEntries(partyUsersID.map(userID => [userID, 0]));\n  const activitiesExpenses = calcActivityExpenses(props.activities, props.items);\n\n  for (const activity of props.activities) {\n    const activityID = activity.activity_id;\n    const activityName = activity.activity_name;\n    const activityUsers = activity.users_id;\n    const activityExpense = activity.activity_expense; // const activityItems = activity.items;\n\n    activitiesRows.push( /*#__PURE__*/_jsxDEV(ActivityRow, {\n      activity: activity,\n      activityID: activityID,\n      activityName: activityName,\n      activityUsers: activityUsers //expense.\n      ,\n      activityExpense: activitiesExpenses[activityID],\n      partyUsersID: partyUsersID,\n      handleActivityClick: props.handleActivityClick,\n      handleCheckboxClick: props.handleCheckboxClick\n    }, activityID, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 29\n    }, this));\n    const partialExpense = activityExpense / activityUsers.length;\n    let totalDebtExpenses = Object.fromEntries(activityUsers.map(userID => [userID, 0]));\n\n    for (const userID of activityUsers) {\n      totalUserExpenses[userID] += partialExpense;\n\n      for (const item of activityItems) {\n        totalDebtExpenses[item.bought_by] += item.item_price;\n      }\n    }\n  }\n\n  for (const userID in totalUserExpenses) {\n    totalUserExpenses[userID] = Math.round(totalUserExpenses[userID] * 100) / 100;\n  }\n\n  activitiesRows.push( /*#__PURE__*/_jsxDEV(TotalRow, {\n    expenses: totalUserExpenses\n  }, -1, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 25\n  }, this));\n  return activitiesRows;\n}\n\n_c3 = Activities;\nexport default Activities;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"DebtRow\");\n$RefreshReg$(_c2, \"ActivityRow\");\n$RefreshReg$(_c3, \"Activities\");","map":{"version":3,"sources":["/home/h3ic/bukh/frontend/src/Activities.js"],"names":["ActivityRowCell","RowCell","ParticipationCheckbox","TotalRow","calcActivityExpenses","DebtRow","props","ActivityRow","checkboxes","userID","partyUsersID","push","handleCheckboxClick","activityID","activityUsers","includes","activity","activityName","handleActivityClick","activityExpense","Activities","users","map","user","user_id","activitiesRows","totalUserExpenses","Object","fromEntries","activitiesExpenses","activities","items","activity_id","activity_name","users_id","activity_expense","partialExpense","length","totalDebtExpenses","item","activityItems","bought_by","item_price","Math","round"],"mappings":"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","sourcesContent":["import {ActivityRowCell, RowCell, ParticipationCheckbox, TotalRow} from \"./TableElements\";\nimport {calcActivityExpenses} from './Calculations';\n\nfunction DebtRow(props) {\n    return (<tr>\n        <th><i>Debt</i></th>\n    </tr>)\n}\n\nfunction ActivityRow(props) {\n    let checkboxes = [];\n    for (const userID of props.partyUsersID) {\n        checkboxes.push(<ParticipationCheckbox key={props.activityID + userID}\n                                               handleCheckboxClick={props.handleCheckboxClick}\n                                               activityID={props.activityID}\n                                               userID={userID}\n                                               defaultChecked={props.activityUsers.includes(userID)}/>);\n    }\n    return (\n        <tr>\n            <ActivityRowCell key={props.activityName}\n                             activity={props.activity}\n                             value={props.activityName} handleActivityClick={props.handleActivityClick}/>\n            {checkboxes}\n            <RowCell key={props.activityID} value={props.activityExpense}/>\n        </tr>\n    );\n}\n\nfunction Activities(props) {\n    // const activities = props.activities;\n    const users = props.users;\n    const partyUsersID = users && users.map(user => user.user_id);\n\n    let activitiesRows = [];\n    let totalUserExpenses = Object.fromEntries(partyUsersID.map(userID => [userID, 0]));\n\n    const activitiesExpenses = calcActivityExpenses(props.activities, props.items);\n\n    for (const activity of props.activities) {\n        const activityID = activity.activity_id;\n        const activityName = activity.activity_name;\n        const activityUsers = activity.users_id;\n        const activityExpense = activity.activity_expense;\n        // const activityItems = activity.items;\n\n        activitiesRows.push(<ActivityRow key={activityID}\n                                         activity={activity}\n                                         activityID={activityID}\n                                         activityName={activityName}\n                                         activityUsers={activityUsers}\n                                         //expense.\n                                         activityExpense={activitiesExpenses[activityID]}\n                                         partyUsersID={partyUsersID}\n                                         handleActivityClick={props.handleActivityClick}\n                                         handleCheckboxClick={props.handleCheckboxClick}\n        />);\n\n        const partialExpense = activityExpense / activityUsers.length;\n        let totalDebtExpenses = Object.fromEntries(activityUsers.map(userID => [userID, 0]));\n        for (const userID of activityUsers) {\n            totalUserExpenses[userID] += partialExpense;\n            for (const item of activityItems) {\n                totalDebtExpenses[item.bought_by] += item.item_price;\n            }\n        }\n    }\n\n    for (const userID in totalUserExpenses) {\n        totalUserExpenses[userID] = Math.round(totalUserExpenses[userID] * 100) / 100;\n    }\n\n    activitiesRows.push(<TotalRow key={-1} expenses={totalUserExpenses}/>);\n\n    return (activitiesRows);\n}\n\nexport default Activities;"]},"metadata":{},"sourceType":"module"}